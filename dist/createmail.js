(()=>{"use strict";const e="http://127.0.0.1:8000",t="http://127.0.0.1:5500";function n(){var e=document.getElementById("image_input"),t=document.getElementById("file_name");if(e.files.length>0){var n=e.files[0].name;t.textContent="Selected File: "+n}else t.textContent=""}document.querySelector(".mail_submit").onclick=()=>{!async function(){const n=new FormData;var o=document.getElementById("title_text"),a=document.getElementById("content_text"),l=document.getElementById("image_input");if(n.append("title",o.value),n.append("content",a.value),o.value)if(a.value){l.files.length>0?n.append("image",l.files[0]):console.log(n),console.log(n);try{const t=localStorage.getItem("access"),o=await fetch(`${e}/service/ad_mail/`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:n});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);const a=await o.json();console.log("Success:",a)}catch(e){console.error("Error:",e)}alert("메일이 발송되었다."),location.href=`${t}/templates/BackOffice.html#/`}else alert("내용을 입력해주세요.");else alert("제목을 입력해주세요.")}()},window.onload=()=>{$("#image_input").on("change",n)}})();