(()=>{"use strict";const e={apikey:"10f9117a3d0b46af95b5e6f734c8c638",frontend_base_url:"http://127.0.0.1:5500",backend_base_url:"http://127.0.0.1:8000",KAKAO_REST_API_KEY:"37cdfc3a357a7f70412c7659dadc8afe",KAKAO_JS_KEY:"1187be6a4c05ceb3e9726fbccfdf4de4",SOCIAL_AUTH_GITHUB_CLIENT_ID:"d4c3cf94add403608578",SOCIAL_AUTH_GITHUB_SECRET:"5afe2cb70c3a39e4c97dac16ad907c727d89efab"},t=document.createElement("link");t.rel="stylesheet",t.href="../css/ReadingPrb.css",document.head.appendChild(t);const n=document.querySelectorAll(".non-click");let o,c=null,l=!1;var r=0;let i=0;function s(e){let t=e.target,o=t.id;if(console.log(t),!l)if(n.forEach((e=>{e.classList.remove("click"),e.style.backgroundColor=""})),c!==o){if(c){const e=document.getElementById(`ch${c}`);e&&(e.classList.remove("click"),e.style.backgroundColor="")}t.classList.add("click"),t.style.backgroundColor="rgb(11, 99, 59)",c=o}else t.classList.remove("click"),t.style.backgroundColor="",c=null}function a(t){var r;document.querySelector(".click")?(function(){document.getElementById("rp_question_text").getAttribute("data-correct-answer");const e=document.querySelector(".click"),t=document.getElementById(o);if(e===t)alert("정답입니다!");else{if(t.style.backgroundColor="lightgreen",c){const e=document.getElementById(`ch${c}`);e&&(e.style.backgroundColor="",e.classList.remove("click"))}e&&(e.style.backgroundColor="red")}}(),l=!0,r=document.querySelector(".reading_submit"),n.forEach((e=>{e.style.pointerEvents="none"})),r.disabled=!0,async function(){const t=localStorage.getItem("access");await fetch(`${e.backend_base_url}/english/reading/${i}/`,{headers:{Authorization:"Bearer "+t},method:"POST"})}(),document.querySelector(".rp_ans_check_btn").style.display="block"):alert("선지를 선택해주세요!")}function d(e){n.forEach((e=>{e.style.pointerEvents="auto"})),e.disabled=!1}function u(){document.querySelector(".solution_explain").style.display="block",kursor.color("#ffffff")}function m(){document.querySelector(".solution_explain").style.display="none"}function y(){document.querySelector(".solution_explain").style.display="none",l=!1,function(){n.forEach((e=>{e.classList.remove("click"),e.style.backgroundColor=""}));const e=document.getElementById("rp_question_text").getAttribute("data-correct-answer"),t=document.getElementById(e);t&&(t.style.backgroundColor="");const o=document.getElementById(`ch${c}`);o&&(o.style.backgroundColor=""),c=null}(),d(document.querySelector(".reading_submit")),p()}function f(){document.querySelector(".really").style.display="block"}function g(){const e=document.querySelector(".really"),t=document.querySelector(".solution_explain");document.querySelector(".result"),e.style.display="none",t.style.display="none",window.location.href="../templates/main.html"}function _(){document.querySelector(".really").style.display="none"}function k(){if(0==r){alert("문제가 저장되었습니다."),r=1;const e=document.querySelector(".save_ex_btn");e.textContent="저장된 문제",console.log("저장"),e.disabled=!0}}function b(){console.log("새로운 문제"),window.location.reload()}async function p(){const t=await fetch(`${e.backend_base_url}/english/reading/`,{method:"POST"});201!=t.status&&(alert("생성 실패"),window.location.href="../templates/main.html");const n=await t.json();i=n.id;const c=n.title,l=n.paragraph,r=n.question,s=n.options[0],a=n.options[1],d=n.options[2],u=n.options[3],m="ch"+(n.solution+1);o=n.solution;const y=n.explanation;document.getElementById("rp_question_text").setAttribute("data-correct-answer",m),document.getElementById("rp_fulltext").innerHTML=`\n      <h4>Reading Reprehension</h4>\n      <h3>${c}</h3>\n      <p>${l}</p>\n    `,document.getElementById("rp_question_text").innerHTML=`\n    <p>${r}</p>\n    `,document.getElementById("0").textContent=s,document.getElementById("1").textContent=a,document.getElementById("2").textContent=d,document.getElementById("3").textContent=u,console.log("correctAnswer:",m),document.getElementById("solution_ans").textContent="정답: "+m.replace("ch","")+"번",document.getElementById("solution_content").textContent=y}function h(){location.href="main.html"}window.onload=function(){l=!1,d(document.querySelector(".reading_submit")),p(),$("#0").on("click",s),$("#1").on("click",s),$("#2").on("click",s),$("#3").on("click",s),$("#submit").on("click",a),$("#solution").on("click",u),$("#close-sol").on("click",m),$("#next-sol").on("click",y),$("#save-sol").on("click",k),$("#exit-sol").on("click",f),$("#really-yes").on("click",g),$("#really-no").on("click",_),$("#goto-main").on("click",h),$("#create-read").on("click",b)},document.addEventListener("DOMContentLoaded",(function(){!function(){let e=localStorage.getItem("coinCount");e||(localStorage.setItem("coinCount",10),e=10),document.getElementById("coin_num").textContent=e}(),localStorage.getItem("prbCount")}))})();