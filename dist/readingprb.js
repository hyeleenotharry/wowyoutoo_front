(()=>{"use strict";const e={apikey:"10f9117a3d0b46af95b5e6f734c8c638",frontend_base_url:"http://127.0.0.1:5500",backend_base_url:"http://127.0.0.1:8000",KAKAO_REST_API_KEY:"37cdfc3a357a7f70412c7659dadc8afe",KAKAO_JS_KEY:"1187be6a4c05ceb3e9726fbccfdf4de4",SOCIAL_AUTH_GITHUB_CLIENT_ID:"d4c3cf94add403608578",SOCIAL_AUTH_GITHUB_SECRET:"5afe2cb70c3a39e4c97dac16ad907c727d89efab"},t=document.querySelectorAll(".non-click");let n,o=null,c=!1;var l=0;let i=0;function r(e){let n=e.target,l=n.id;if(console.log(n),!c)if(t.forEach((e=>{e.classList.remove("click"),e.style.backgroundColor=""})),o!==l){if(o){const e=document.getElementById(`ch${o}`);e&&(e.classList.remove("click"),e.style.backgroundColor="")}n.classList.add("click"),n.style.backgroundColor="rgb(11, 99, 59)",o=l}else n.classList.remove("click"),n.style.backgroundColor="",o=null}function a(l){var r;document.querySelector(".click")?(function(){document.getElementById("rp_question_text").getAttribute("data-correct-answer");const e=document.querySelector(".click"),t=document.getElementById(n);if(e===t)alert("정답입니다!");else{if(t.style.backgroundColor="lightgreen",o){const e=document.getElementById(`ch${o}`);e&&(e.style.backgroundColor="",e.classList.remove("click"))}e&&(e.style.backgroundColor="red")}}(),c=!0,r=document.querySelector(".reading_submit"),t.forEach((e=>{e.style.pointerEvents="none"})),r.disabled=!0,async function(){const t=localStorage.getItem("access");await fetch(`${e.backend_base_url}/english/reading/${i}/`,{headers:{Authorization:"Bearer "+t},method:"POST"})}(),document.querySelector(".rp_ans_check_btn").style.display="block"):alert("선지를 선택해주세요!")}function s(e){t.forEach((e=>{e.style.pointerEvents="auto"})),e.disabled=!1}function d(){document.querySelector(".solution_explain").style.display="block",kursor.color("#ffffff")}function u(){document.querySelector(".solution_explain").style.display="none"}function m(){document.querySelector(".solution_explain").style.display="none",c=!1,function(){t.forEach((e=>{e.classList.remove("click"),e.style.backgroundColor=""}));const e=document.getElementById("rp_question_text").getAttribute("data-correct-answer"),n=document.getElementById(e);n&&(n.style.backgroundColor="");const c=document.getElementById(`ch${o}`);c&&(c.style.backgroundColor=""),o=null}(),s(document.querySelector(".reading_submit")),b()}function y(){document.querySelector(".really").style.display="block"}function f(){const e=document.querySelector(".really"),t=document.querySelector(".solution_explain");document.querySelector(".result"),e.style.display="none",t.style.display="none",window.location.href="../templates/main.html"}function g(){document.querySelector(".really").style.display="none"}function _(){if(0==l){alert("문제가 저장되었습니다."),l=1;const e=document.querySelector(".save_ex_btn");e.textContent="저장된 문제",console.log("저장"),e.disabled=!0}}function k(){console.log("새로운 문제"),window.location.reload()}async function b(){const t=await fetch(`${e.backend_base_url}/english/reading/`,{method:"POST"});201!=t.status&&(alert("생성 실패"),window.location.href="../templates/main.html");const o=await t.json();i=o.id;const c=o.title,l=o.paragraph,r=o.question,a=o.options[0],s=o.options[1],d=o.options[2],u=o.options[3],m="ch"+(o.solution+1);n=o.solution;const y=o.explanation;document.getElementById("rp_question_text").setAttribute("data-correct-answer",m),document.getElementById("rp_fulltext").innerHTML=`\n      <h4>Reading Reprehension</h4>\n      <h3>${c}</h3>\n      <p>${l}</p>\n    `,document.getElementById("rp_question_text").innerHTML=`\n    <p>${r}</p>\n    `,document.getElementById("0").textContent=a,document.getElementById("1").textContent=s,document.getElementById("2").textContent=d,document.getElementById("3").textContent=u,console.log("correctAnswer:",m),document.getElementById("solution_ans").textContent="정답: "+m.replace("ch","")+"번",document.getElementById("solution_content").textContent=y}function p(){location.href="main.html"}window.onload=function(){c=!1,s(document.querySelector(".reading_submit")),b(),$("#0").on("click",r),$("#1").on("click",r),$("#2").on("click",r),$("#3").on("click",r),$("#submit").on("click",a),$("#solution").on("click",d),$("#close-sol").on("click",u),$("#next-sol").on("click",m),$("#save-sol").on("click",_),$("#exit-sol").on("click",y),$("#really-yes").on("click",f),$("#really-no").on("click",g),$("#goto-main").on("click",p),$("#create-read").on("click",k)},document.addEventListener("DOMContentLoaded",(function(){!function(){let e=localStorage.getItem("coinCount");e||(localStorage.setItem("coinCount",10),e=10),document.getElementById("coin_num").textContent=e}(),localStorage.getItem("prbCount")}))})();