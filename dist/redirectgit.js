(()=>{"use strict";const e="http://127.0.0.1:5500",t="http://127.0.0.1:8000";console.log("redirect_git");const o=window.location.search;console.log(o),axios.post(`${t}/accounts/github/login/`,{code:o}).then((t=>{if(200==t.status){localStorage.clear(),console.log(t.data);const o=t.data;localStorage.setItem("access",o.access),localStorage.setItem("refresh",o.refresh),localStorage.setItem("provider",o.provider);const a=o.access.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(atob(a).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));localStorage.setItem("payload",l),alert("환영합니다."),window.location.replace(`${e}/templates/main.html`)}else 201==t.status&&(localStorage.clear(),alert("회원가입이 완료되었습니다. 로그인을 진행해주세요"),window.location.href="../templates/login.html")})).catch((e=>{alert(e.response.data.error),console.log(e.response.data.error),window.location.href="../templates/login.html"}))})();